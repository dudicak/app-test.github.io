<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0ea5e9" />
  <title>ília events – Protótipo Funcional</title>
  <meta name="description" content="Protótipo funcional do app ília events (React + Tailwind via CDN).">
  <link rel="icon" href="./assets/logo.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    html, body { height: 100%; background: #f4f4f5; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .link { text-decoration: underline; color: #1d4ed8; }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
  <div id="root"></div>

  <!-- JavaScript-only (sem TypeScript). -->
  <script type="text/babel" data-presets="react">
    // ===== Store simples em localStorage =====
    const store = {
      save(key, value) { localStorage.setItem(key, JSON.stringify(value)); },
      get(key, fallback) {
        try { const v = localStorage.getItem(key); return v ? JSON.parse(v) : fallback; }
        catch { return fallback; }
      },
      del(key) { localStorage.removeItem(key); }
    };

    // ===== Dados iniciais =====
    const seedEvents = [
      {
        id: "evt_bmw",
        slug: "bmw-tech-summit",
        name: "BMW Tech Summit – Drive the Future",
        location: "Brasília/DF",
        startDate: "2025-10-25T09:00:00-03:00",
        endDate: "2025-10-27T18:00:00-03:00",
        lat: -15.7942, lng: -47.8822,
        description: "Evento de tecnologia com trilhas de Cloud, AI e DevOps. Parcerias com restaurantes locais e atrações.",
        partners: [
          { id: "p1", name: "Sushida Asa Sul", type: "Japonesa", discount: "10%", mapsUrl: "https://maps.google.com" },
          { id: "p2", name: "Cantina Brasília", type: "Italiana", discount: "12%", mapsUrl: "https://maps.google.com" },
        ],
        schedule: [
          { id: "s1", title: "Abertura & Keynote", desc: "Visão 2026", start: "2025-10-25T09:00:00-03:00", end: "2025-10-25T10:00:00-03:00", room: "Auditório" },
          { id: "s2", title: "Palestra: Cloud na BMW", desc: "Arquiteturas escaláveis", start: "2025-10-25T14:00:00-03:00", end: "2025-10-25T15:00:00-03:00", room: "Sala 1" },
          { id: "s3", title: "Painel: AI Aplicada", start: "2025-10-25T18:00:00-03:00", end: "2025-10-25T19:00:00-03:00", room: "Auditório" },
        ],
        active: true,
        feedbackGeneralOpensAt: "2025-10-27T18:00:00-03:00",
      },
      {
        id: "evt_agile",
        slug: "agile-days",
        name: "Agile Days – Edição Centro-Oeste",
        location: "Brasília/DF",
        startDate: "2026-03-12T09:00:00-03:00",
        endDate: "2026-03-13T18:00:00-03:00",
        description: "Dojo, talks e painéis de agilidade.",
        partners: [],
        schedule: [
          { id: "a1", title: "Product Discovery em 90'", start: "2026-03-12T10:00:00-03:00", end: "2026-03-12T11:30:00-03:00" },
        ],
        active: false,
        feedbackGeneralOpensAt: "2026-03-13T18:00:00-03:00",
      },
    ];

    const seedUsers = [
      // admin demo
      { id: "u_admin", name: "Admin", email: "admin@ilia.com", company: "ília", phone: "", isAdmin: true, optinEmail: true, password: "admin", enrolledEventIds: ["evt_bmw"] },
    ];

    // ===== Helpers =====
    const { useState, useMemo, useEffect } = React;
    const fmtDate = (iso) => new Date(iso).toLocaleString("pt-BR", { dateStyle: "short", timeStyle: "short" });

    function usePersistentState(key, initial) {
      const [value, setValue] = useState(store.get(key, initial));
      useEffect(() => { store.save(key, value); }, [key, value]);
      return [value, setValue];
    }

    function getUsers() { return store.get("users", seedUsers.slice()); }
    function setUsers(arr) { store.save("users", arr); }
    function upsertUser(u) {
      const users = getUsers();
      const idx = users.findIndex(x => x.email.toLowerCase() === u.email.toLowerCase());
      if (idx >= 0) users[idx] = { ...users[idx], ...u };
      else users.push(u);
      setUsers(users);
      return u;
    }
    function findUserByEmail(email) {
      const users = getUsers();
      return users.find(u => u.email.toLowerCase() === String(email).toLowerCase());
    }

    function Chip({ children, tone = "blue" }) {
      const tones = {
        blue: "bg-blue-50 text-blue-700 border-blue-200",
        green: "bg-green-50 text-green-700 border-green-200",
        amber: "bg-amber-50 text-amber-800 border-amber-200",
        rose: "bg-rose-50 text-rose-700 border-rose-200",
      };
      return <span className={"px-2 py-0.5 text-[11px] rounded-full border " + (tones[tone] || tones.blue) + " inline-flex items-center gap-1"}>{children}</span>;
    }

    function Shell({ title, children, onToggleMenu }) {
      return (
        <div className="w-full min-h-screen bg-zinc-100 flex items-center justify-center p-4">
          <div className="w-[380px] h-[760px] bg-white shadow-2xl rounded-3xl overflow-hidden border border-zinc-200 flex flex-col relative">
            <div className="h-14 bg-gradient-to-r from-sky-600 to-blue-700 text-white flex items-center justify-between px-4">
              <button onClick={onToggleMenu} className="rounded-xl px-3 py-1.5 hover:bg-white/10 transition">☰</button>
              <div className="font-semibold text-sm tracking-wide">{title}</div>
              <div className="text-xs opacity-75">ília events</div>
            </div>
            <div className="flex-1 overflow-auto bg-zinc-50">{children}</div>
          </div>
        </div>
      );
    }

    function App() {
      const [events, setEvents] = usePersistentState("events", seedEvents);
      const [currentUser, setCurrentUser] = usePersistentState("user", null);
      const [menuOpen, setMenuOpen] = useState(false);
      const [feedbackModal, setFeedbackModal] = useState({ open: false, eventId: null, slotId: null });

      useEffect(() => { if (!store.get("users", null)) setUsers(seedUsers); }, []);

      const activeEvents = useMemo(() => events.filter((e) => e.active), [events]);
      const go = (hash) => { location.hash = hash; };

      const Menu = () => (
        <div className={"absolute top-14 left-0 right-0 bg-white border-b border-zinc-200 " + (menuOpen ? "block" : "hidden")}>
          <div className="grid grid-cols-2 gap-2 p-3 text-xs">
            <button className="px-3 py-2 rounded-xl bg-zinc-100 hover:bg-zinc-200" onClick={() => { go("/"); setMenuOpen(false); }}>Início</button>
            <button className="px-3 py-2 rounded-xl bg-zinc-100 hover:bg-zinc-200" onClick={() => { go("/meus"); setMenuOpen(false); }}>Meus eventos</button>
            <button className="px-3 py-2 rounded-xl bg-zinc-100 hover:bg-zinc-200" onClick={() => { go("/perfil"); setMenuOpen(false); }}>Perfil</button>
            <button className="px-3 py-2 rounded-xl bg-zinc-100 hover:bg-zinc-200" onClick={() => { go("/admin"); setMenuOpen(false); }}>Admin</button>
            {currentUser ? (
              <button className="px-3 py-2 rounded-xl bg-rose-100 hover:bg-rose-200 col-span-2" onClick={() => { setCurrentUser(null); go("/"); setMenuOpen(false); }}>Sair</button>
            ) : null}
          </div>
        </div>
      );

      // ===== Telas =====
      const Welcome = () => (
        <Shell title="Boas-vindas" onToggleMenu={() => setMenuOpen((v) => !v)}>
          <Menu />
          <div className="p-6 space-y-5">
            <div className="rounded-2xl bg-gradient-to-br from-blue-600 to-sky-500 text-white p-6 shadow-lg">
              <div className="text-xs opacity-90">Evento em destaque</div>
              <div className="text-lg font-semibold mt-1">BMW Tech Summit</div>
              <div className="text-sm opacity-90">Brasília/DF — 25 a 27/10</div>
              <div className="mt-4 flex gap-2">
                <button className="px-4 py-2 bg-white/95 text-blue-700 rounded-xl hover:bg-white" onClick={() => go("/e/bmw-tech-summit")}>Abrir /e/bmw-tech-summit</button>
              </div>
            </div>

            <div className="grid grid-cols-1 gap-3">
              {activeEvents.map((e) => (
                <div key={e.id} className="rounded-2xl border bg-white p-4 shadow-sm">
                  <div className="flex items-start justify-between">
                    <div>
                      <div className="text-sm font-semibold">{e.name}</div>
                      <div className="text-xs text-zinc-600">{e.location}</div>
                    </div>
                    <Chip tone="green">Ativo</Chip>
                  </div>
                  <div className="text-xs text-zinc-500 mt-1">{fmtDate(e.startDate)} — {fmtDate(e.endDate)}</div>
                  <div className="mt-3 flex gap-2">
                    <button className="px-3 py-1.5 rounded-xl bg-blue-600 text-white text-xs" onClick={() => go("/e/" + e.slug)}>Abrir link público</button>
                    <button className="px-3 py-1.5 rounded-xl bg-zinc-100 text-xs" onClick={() => go("/login")}>Entrar</button>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </Shell>
      );

      const Landing = ({ slug }) => {
        const ev = events.find((e) => e.slug === slug);
        if (!ev) return <Shell title="Evento" onToggleMenu={() => setMenuOpen((v) => !v)}><Menu /><div className="p-6 text-center text-sm">Evento não encontrado.</div></Shell>;
        if (!ev.active) return <Shell title="Evento" onToggleMenu={() => setMenuOpen((v) => !v)}><Menu /><div className="p-6 text-center text-sm">Este evento está inativo no momento.</div></Shell>;
        return (
          <Shell title="Evento público" onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-6 space-y-4">
              <div className="text-base font-semibold">{ev.name}</div>
              <div className="text-sm text-zinc-600">{ev.location}</div>
              <div className="text-xs text-zinc-500">{fmtDate(ev.startDate)} — {fmtDate(ev.endDate)}</div>
              <p className="text-sm text-zinc-700">{ev.description}</p>
              <div className="flex gap-2 pt-2">
                <button className="px-4 py-2 rounded-xl bg-blue-600 text-white" onClick={() => go("/login?from=" + slug)}>Entrar</button>
                <button className="px-4 py-2 rounded-xl bg-zinc-100" onClick={() => go("/register?from=" + slug)}>Cadastrar</button>
              </div>
            </div>
          </Shell>
        );
      };

      const Login = () => {
        const params = new URLSearchParams(location.hash.split("?")[1] || ""); const fromSlug = params.get("from") || undefined;
        const [email, setEmail] = useState(""); const [pass, setPass] = useState("");
        return (
          <Shell title="Login" onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-6 space-y-3">
              <input className="w-full px-3 py-2 rounded-xl border" placeholder="E-mail corporativo" value={email} onChange={(e) => setEmail(e.target.value)} />
              <input className="w-full px-3 py-2 rounded-xl border" placeholder="Senha" type="password" value={pass} onChange={(e) => setPass(e.target.value)} />
              <button className="w-full px-4 py-2 rounded-xl bg-blue-600 text-white" onClick={() => {
                const existing = findUserByEmail(email);
                if (!existing || existing.password !== pass) {
                  alert("Credenciais inválidas (dica: admin@ilia.com / admin).");
                  return;
                }
                let u = { ...existing };
                if (fromSlug) {
                  const ev = events.find((e) => e.slug === fromSlug && e.active);
                  if (ev && !u.enrolledEventIds.includes(ev.id)) {
                    u.enrolledEventIds = [...u.enrolledEventIds, ev.id];
                    upsertUser(u);
                  }
                }
                setCurrentUser(u); go("/meus");
              }}>Entrar</button>
              <div className="text-xs text-zinc-500">Demo: admin@ilia.com / admin</div>
              <button className="w-full px-4 py-2 rounded-xl bg-zinc-100" onClick={() => go("/register?from=" + (fromSlug || ""))}>Cadastrar</button>
            </div>
          </Shell>
        );
      };

      const Register = () => {
        const params = new URLSearchParams(location.hash.split("?")[1] || ""); const fromSlug = params.get("from") || undefined;
        const [form, setForm] = useState({ name: "", email: "", company: "", phone: "", pass: "", optin: true });
        return (
          <Shell title="Cadastro" onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-6 space-y-3">
              {["name","email","company","phone","pass"].map((k) => (
                <input key={k} className="w-full px-3 py-2 rounded-xl border" placeholder={{ name: "Nome completo", email: "E-mail corporativo", company: "Empresa", phone: "Telefone (opcional)", pass: "Senha" }[k]} type={k==="pass"?"password":"text"} value={form[k]} onChange={(e) => setForm({ ...form, [k]: e.target.value })} />
              ))}
              <label className="text-xs flex items-center gap-2"><input type="checkbox" checked={form.optin} onChange={(e) => setForm({ ...form, optin: e.target.checked })} />Quero receber notificações por e-mail</label>
              <button className="w-full px-4 py-2 rounded-xl bg-blue-600 text-white" onClick={() => {
                if (findUserByEmail(form.email)) { alert("E-mail já cadastrado."); return; }
                const newUser = { id: "u" + Math.random().toString(36).slice(2,7), name: form.name || "Convidado", email: form.email || "guest@ilia.com", company: form.company || "ília", phone: form.phone, isAdmin: false, optinEmail: form.optin, password: form.pass, enrolledEventIds: [] };
                if (fromSlug) { const ev = events.find((e) => e.slug === fromSlug && e.active); if (ev) newUser.enrolledEventIds.push(ev.id); }
                upsertUser(newUser);
                setCurrentUser(newUser); go("/meus");
              }}>Criar conta</button>
            </div>
          </Shell>
        );
      };

      const MyEvents = () => {
        if (!currentUser) return Login();
        const my = events.filter((e) => currentUser.enrolledEventIds.includes(e.id) && e.active);
        return (
          <Shell title="Meus eventos" onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-4 space-y-3">
              {my.length === 0 ? <div className="text-center text-sm text-zinc-600">Você ainda não está inscrito em eventos ativos.</div> : my.map((e) => (
                <div key={e.id} className="rounded-2xl border bg-white p-4 shadow-sm">
                  <div className="text-sm font-semibold">{e.name}</div>
                  <div className="text-xs text-zinc-600">{e.location}</div>
                  <div className="text-xs text-zinc-500 mt-1">{fmtDate(e.startDate)} — {fmtDate(e.endDate)}</div>
                  <div className="mt-3 flex gap-2">
                    <button className="px-3 py-1.5 rounded-xl bg-blue-600 text-white text-xs" onClick={() => go("/evento/"+e.id+"/info")}>Abrir evento</button>
                  </div>
                </div>
              ))}
            </div>
          </Shell>
        );
      };

      const EventPage = ({ eventId, tab = "info" }) => {
        const ev = events.find((e) => e.id === eventId);
        if (!currentUser || !ev) return MyEvents();
        const canAccess = currentUser.enrolledEventIds.includes(ev.id) && ev.active;
        if (!canAccess) return <Shell title="Acesso ao evento" onToggleMenu={() => setMenuOpen((v) => !v)}><Menu /><div className="p-6 text-center text-sm">Este evento não está disponível para sua conta.</div></Shell>;

        const tabs = [
          { key: "info", label: "Informações" },
          { key: "map", label: "Mapa" },
          { key: "schedule", label: "Cronograma" },
          { key: "partners", label: "Restaurantes" },
          { key: "feedback", label: "Feedback do Evento" },
        ];

        const TabButton = ({ t }) => (
          <button className={"px-3 py-2 rounded-xl text-xs " + (tab === t.key ? "bg-blue-600 text-white" : "bg-zinc-100")} onClick={() => go("/evento/"+ev.id+"/"+t.key)}>
            {t.label}
          </button>
        );

        const fmt = fmtDate;

        return (
          <Shell title={ev.name} onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-4 space-y-4">
              <div className="flex gap-2 overflow-x-auto no-scrollbar">{tabs.map((t) => <TabButton key={t.key} t={t} />)}</div>

              {tab === "info" && (
                <div className="rounded-2xl border bg-white p-4 text-sm space-y-1">
                  <div className="font-semibold">{ev.location}</div>
                  <div className="text-zinc-600">{fmt(ev.startDate)} — {fmt(ev.endDate)}</div>
                  <p className="text-zinc-700 pt-2">{ev.description}</p>
                </div>
              )}

              {tab === "map" && (
                <div className="rounded-2xl border bg-white p-4 text-sm">
                  <div className="h-56 rounded-xl bg-gradient-to-br from-blue-200 to-blue-50 flex items-center justify-center text-blue-700">(Mapa placeholder)</div>
                  <div className="text-xs text-zinc-600 mt-2">Lat/Lng: {ev.lat}, {ev.lng}</div>
                </div>
              )}

              {tab === "partners" && (
                <div className="space-y-2">
                  {(ev.partners || []).map((p) => (
                    <div key={p.id} className="rounded-2xl border bg-white p-4 text-sm flex items-center justify-between">
                      <div>
                        <div className="font-medium">{p.name}</div>
                        <div className="text-xs text-zinc-600">{p.type} {p.discount ? "• " + p.discount : ""}</div>
                      </div>
                      <a className="text-xs underline text-blue-700" href={p.mapsUrl} target="_blank" rel="noreferrer">Abrir no Maps</a>
                    </div>
                  ))}
                  {(!ev.partners || ev.partners.length === 0) && <div className="text-xs text-zinc-500">Sem parceiros cadastrados.</div>}
                </div>
              )}

              {tab === "schedule" && (
                <div className="space-y-2">
                  {ev.schedule.map((s) => (
                    <div key={s.id} className="rounded-2xl border bg-white p-4 text-sm">
                      <div className="font-medium">{s.title}</div>
                      {s.desc && <div className="text-xs text-zinc-600">{s.desc}</div>}
                      <div className="text-xs text-zinc-500 mt-1">{fmt(s.start)} — {fmt(s.end)} {s.room ? "• " + s.room : ""}</div>
                      <div className="mt-3 flex gap-2">
                        <button className="px-3 py-1.5 rounded-xl bg-zinc-100 text-xs" onClick={() => alert("Lembrete por e-mail enviado (simulado).")}>Lembrar por e-mail</button>
                        <button className="px-3 py-1.5 rounded-xl bg-rose-100 text-xs" onClick={() => setFeedbackModal({ open: true, eventId: ev.id, slotId: s.id })}>Feedback</button>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {tab === "feedback" && (
                <div className="rounded-2xl border bg-white p-4">
                  {new Date() < new Date(ev.feedbackGeneralOpensAt) ? (
                    <div className="text-sm text-zinc-600">Feedback do evento disponível em <b>{fmt(ev.feedbackGeneralOpensAt)}</b>.</div>
                  ) : (
                    <div className="space-y-3 text-sm">
                      <div className="font-medium">Como foi sua experiência geral?</div>
                      <div className="flex gap-1">{"★★★★★".split("").map((_, i) => (<button key={i} className="px-2 py-1 rounded bg-amber-100 text-amber-800 text-xs">★</button>))}</div>
                      <textarea className="w-full rounded-xl border p-2" placeholder="Comentários (opcional)" rows={3}></textarea>
                      <button className="px-4 py-2 rounded-xl bg-blue-600 text-white" onClick={() => alert("Feedback do evento enviado (simulado).")}>Enviar feedback</button>
                    </div>
                  )}
                </div>
              )}
            </div>

            {feedbackModal.open && (
              <div className="absolute inset-0 bg-black/40 flex items-center justify-center p-6">
                <div className="w-full max-w-sm rounded-2xl bg-white p-4 space-y-3">
                  <div className="text-sm font-semibold">Feedback da atividade</div>
                  <div className="flex gap-1 text-amber-700">{"★★★★★".split("").map((_, i) => (<button key={i} className="px-2 py-1 rounded bg-amber-100 text-xs">★</button>))}</div>
                  <textarea className="w-full rounded-xl border p-2" placeholder="Comentário (opcional)" rows={3}></textarea>
                  <div className="flex gap-2 justify-end">
                    <button className="px-3 py-1.5 rounded-xl bg-zinc-100 text-xs" onClick={() => setFeedbackModal({ open: false, eventId: null, slotId: null })}>Cancelar</button>
                    <button className="px-3 py-1.5 rounded-xl bg-blue-600 text-white text-xs" onClick={() => { setFeedbackModal({ open: false, eventId: null, slotId: null }); alert("Feedback enviado (simulado)."); }}>Enviar</button>
                  </div>
                </div>
              </div>
            )}
          </Shell>
        );
      };

      const Profile = () => {
        if (!currentUser) return Login();
        const [form, setForm] = useState({ name: currentUser.name, company: currentUser.company, phone: currentUser.phone || "", optin: currentUser.optinEmail, pass: "" });
        return (
          <Shell title="Perfil" onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-6 space-y-3">
              <input className="w-full px-3 py-2 rounded-xl border" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })} />
              <input className="w-full px-3 py-2 rounded-xl border" value={form.company} onChange={(e) => setForm({ ...form, company: e.target.value })} />
              <input className="w-full px-3 py-2 rounded-xl border" value={form.phone} onChange={(e) => setForm({ ...form, phone: e.target.value })} />
              <label className="text-xs flex items-center gap-2"><input type="checkbox" checked={form.optin} onChange={(e) => setForm({ ...form, optin: e.target.checked })} />Receber notificações por e-mail</label>
              <input className="w-full px-3 py-2 rounded-xl border" type="password" placeholder="Nova senha (opcional)" value={form.pass} onChange={(e) => setForm({ ...form, pass: e.target.value })} />
              <div className="flex gap-2 pt-2">
                <button className="px-4 py-2 rounded-xl bg-blue-600 text-white" onClick={() => {
                  const u = { ...currentUser, name: form.name, company: form.company, phone: form.phone, optinEmail: form.optin };
                  if (form.pass) u.password = form.pass;
                  upsertUser(u);
                  setCurrentUser(u);
                  alert("Perfil atualizado (simulado).");
                }}>Salvar</button>
                <button className="px-4 py-2 rounded-xl bg-zinc-100" onClick={() => go("/")}>Cancelar</button>
              </div>
            </div>
          </Shell>
        );
      };

      const Admin = () => {
        if (!currentUser || !currentUser.isAdmin) return <Shell title="Admin" onToggleMenu={() => setMenuOpen((v) => !v)}><Menu /><div className="p-6 text-sm text-center">Acesso restrito.</div></Shell>;
        const users = getUsers();
        const enrolledByEvent = (eventId) => users.filter(u => (u.enrolledEventIds || []).includes(eventId));
        return (
          <Shell title="Admin – Eventos" onToggleMenu={() => setMenuOpen((v) => !v)}>
            <Menu />
            <div className="p-4 space-y-3">
              {events.map((e) => (
                <div key={e.id} className="rounded-2xl border bg-white p-4 space-y-2">
                  <div className="flex items-center justify-between">
                    <div>
                      <div className="text-sm font-semibold">{e.name}</div>
                      <div className="text-xs text-zinc-600">Link público: <span className="link">/#/e/{e.slug}</span></div>
                    </div>
                    <div className="flex items-center gap-2">
                      <Chip tone={e.active ? "green" : "rose"}>{e.active ? "Ativo" : "Inativo"}</Chip>
                      <button className="px-3 py-1.5 rounded-xl bg-zinc-100 text-xs" onClick={() => setEvents((arr) => arr.map((x) => (x.id === e.id ? { ...x, active: !x.active } : x)))}>{e.active ? "Desativar" : "Ativar"}</button>
                    </div>
                  </div>
                  <div className="text-xs text-zinc-600">Inscritos: {enrolledByEvent(e.id).length}</div>
                  <div className="rounded-xl bg-zinc-50 border p-3 text-xs space-y-1 max-h-40 overflow-auto">
                    {enrolledByEvent(e.id).length === 0 ? <div className="text-zinc-500">Sem inscritos.</div> :
                      enrolledByEvent(e.id).map(u => (<div key={u.email} className="flex justify-between"><span>{u.name}</span><span className="text-zinc-500">{u.email}</span></div>))
                    }
                  </div>
                </div>
              ))}
            </div>
          </Shell>
        );
      };

      // ====== Router/render por hash ======
      const render = () => {
        let h = location.hash;
        if (h.startsWith("#/")) h = h.slice(2); else if (h.startsWith("#")) h = h.slice(1);
        const parts = h.split("/").filter(Boolean);
        const root = document.getElementById("root"); if (!root) return;
        const r = ReactDOM.createRoot(root);
        if (parts.length === 0) return r.render(<Welcome />);
        if (parts[0] === "e" && parts[1]) return r.render(<Landing slug={parts[1]} />);
        if (parts[0] === "login") return r.render(<Login />);
        if (parts[0] === "register") return r.render(<Register />);
        if (parts[0] === "meus") return r.render(<MyEvents />);
        if (parts[0] === "evento" && parts[1]) return r.render(<EventPage eventId={parts[1]} tab={(parts[2] || "info")} />);
        if (parts[0] === "perfil") return r.render(<Profile />);
        if (parts[0] === "admin") return r.render(<Admin />);
        return r.render(<Welcome />);
      };

      useEffect(() => { render(); }, [events, currentUser, feedbackModal, menuOpen]);
      useEffect(() => { window.addEventListener("hashchange", render); return () => window.removeEventListener("hashchange", render); }, []);

      return <div />;
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
